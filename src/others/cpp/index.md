# C++相关

## C++ Lambda表达式基本使用

完整声明格式如下：

```c++
[capture list] (params list) mutable exception-> return type { function body }
```

各项具体含义如下

1. capture list：捕获外部变量列表
2. params list：形参列表
3. mutable指示符：用来说用是否可以修改捕获的变量
4. exception：异常设定
5. return type：返回类型
6. function body：函数体

此外，我们还可以省略其中的某些成分来声明“不完整”的Lambda表达式，常见的有以下几种：

| 序号 | 格式                                                        |
| ---- | ----------------------------------------------------------- |
| 1    | [capture list] (params list) -> return type {function body} |
| 2    | [capture list] (params list) {function body}                |
| 3    | [capture list] {function body}                              |

**C++11中的Lambda表达式捕获外部变量主要有以下形式：**

| 捕获形式    | 说明                                                         |
| ----------- | ------------------------------------------------------------ |
| []          | 不捕获任何外部变量                                           |
| [变量名, …] | 默认以值得形式捕获指定的多个外部变量（用逗号分隔），如果引用捕获，需要显示声明（使用&说明符） |
| [this]      | 以值的形式捕获this指针                                       |
| [=]         | 以值的形式捕获所有外部变量                                   |
| [&]         | 以引用形式捕获所有外部变量                                   |
| [=, &x]     | 变量x以引用形式捕获，其余变量以传值形式捕获                  |
| [&, x]      | 变量x以值的形式捕获，其余变量以引用形式捕获                  |

**Lambda表达式的参数**

Lambda表达式的参数和普通函数的参数类似，那么这里为什么还要拿出来说一下呢？原因是在Lambda表达式中传递参数还有一些限制，主要有以下几点：

1. 参数列表中不能有默认参数
2. 不支持可变参数
3. 所有参数必须有参数名



## 选择哪些编译器?

### MinGW系列

### **1. 原始 MinGW**

- **来源**：最早的 MinGW 项目，由 [MinGW.org](http://www.mingw.org/) 开发和维护。
- 特点：
  - 提供最基础的 GCC 工具链，适合简单的 Windows 应用开发。
  - 支持 Win32 API，但较少关注现代 C++ 标准。
  - 更新较慢，社区活跃度降低。
- **适用场景**：仅用于小型、简单的 Windows 程序开发，或者教学用途。
- 不足：
  - GCC 和 GDB 版本较老，现代 C++ 支持不足。
  - 在大型项目中可能会遇到依赖和性能问题。



### **2. MinGW-w64**

- **来源**：由社区分叉自原始 MinGW，活跃的开发维护项目。官网：[MinGW-w64](http://mingw-w64.org/)。
- 特点：
  - **64 位支持：** 原始 MinGW 仅支持 32 位，而 MinGW-w64 同时支持 32 位和 64 位目标平台。
  - **现代化：** 提供更全面的 C++ 标准库支持，包括对 C++17、C++20 的较好兼容性。
  - **工具链丰富：** 包含更现代的 GCC 和 GDB。
- **适用场景**：适合需要现代 C++ 支持和跨平台开发的项目。
- 不足：
  - 工具链配置和使用可能比原始 MinGW 更复杂一些。



### **3. TDM-GCC**

- **来源**：由第三方开发者（TDM）维护的 MinGW 分支，基于 MinGW 和 MinGW-w64。官网：TDM-GCC。
- 特点：
  - 提供用户友好的安装程序，易于快速上手。
  - 默认静态链接标准库，减少运行时对动态链接库的依赖。
  - 集成多线程支持，特别是在 64 位平台上的表现更好。
- **适用场景**：入门开发者、小型项目，以及需要简单配置和安装的场景。
- 不足：
  - 相比 MinGW-w64，更新频率较低。
  - 不适合高度定制化的开发需求。



### **MSYS2（推荐）**

- **来源**：基于 MinGW-w64 的现代化项目，支持丰富的工具链。官网：[MSYS2](https://www.msys2.org/)。
- 特点：
  - **包管理器（pacman）：** 提供类似 Linux 的包管理工具，可快速安装和更新 MinGW-w64 工具链及依赖库。
  - **完整环境：** 包含 MinGW-w64 的 32 位和 64 位工具链，并且可以作为一个类 Unix 环境运行。
  - **灵活性：** 允许同时安装多种工具链（如 GCC、Clang 等）。
- **适用场景**：适合需要完整开发环境、快速安装依赖包的开发者，特别是跨平台项目。
- 不足：
  - 安装和配置对初学者稍有复杂。



---



## 如何区分 MinGW-w64 构建版本？

**目标架构**

- `i686`：适合 32 位目标程序。
- `x86_64`：适合 64 位目标程序。

**线程模型**

- **posix**：使用 POSIX 风格的多线程，适合跨平台需求较高的项目。
- **win32**：使用 Win32 API 多线程，适合纯 Windows 应用。

**异常处理**

- **sjlj**：适合 32 位程序，异常处理开销较小，但性能稍低。
- **dwarf**：适合 32 位程序，性能高，但仅支持单线程。
- **seh**：推荐用于 64 位程序，性能高，支持多线程。



---



